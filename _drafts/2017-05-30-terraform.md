---
published: false
---
## Инфраструктура как код (ИКК)

Инфраструктура как код это идея заключающаяся в том, что вы пишите код и определяете, изменяете и деплоите вашу инфраструктуру при помощи кода. Код может описывать любые сущности, такие как серверы, сети, базы данных, програмное обеспечение, лог-файлы, конфигурацию приложений, даже документацию, тесты и процессы.

К утилитам ИКК можут относится:
 - специальные скрипты (bash\python\ruby скрипты)
 - утилиты управления конфигурациями(chefpuppet\saltstack\ansible)
 - утилиты оркестрации и шаблонов(docker\packer\kubernetes\swarm\vagrant)
 - утилиты управления инфрастуктурой(terraform\cloudformation\openstack_heat)
 
## Преимущества инфрастуктуры как код

У Каждого метода применяемого в работе есть свои преимущества и недостатки. Так как я только начал разбираться в этих дебрях, то о недостатках я напишу позже. Основная идея использования ИКК это уменьшение времени доставки программного обеспечения, если это звучит угловато, то можно еще проще, время работы потраченное на автоматизацию рутинных процесов увеличивает время которое вы можете потратить на разработку и перестать тонуть в рутине.

О преимуществах:

### Управление версиями и валидация

Это значит, что весь код храниться в yaml файлах, которые хранятся в vcs(например git), поэтому вы можете управлять версиями, что значит что существует возможность при неудачных изменениях вернуться на тот момент времени когда новых изменений еще не существовало, соответсвенно знать всю историю изменений, проверять ошибки перед внесением каких либо изменений, в том числе если они могут быть критичными.

### Документация

Этот пункт значит, что ваш код является сам по себе хорошим средством документации. Любой может взглянть на код и зная синтаксис декларативного языка понять, что произойдет при выполнении части кода.

### Самообслуживание

Обычно процесс развертывания приложений это долгий процесс, и для многих является ничем иным как магией, из-за того, что оп мере роста организации колво релихов растет, а процесс чаще всего поризводится в ручную инженерами или системными администраторами, поэтому одно из преимуществ это возможность поризводить развертывание программного обеспечения в любое удобное время.


### Быстрота и повторяемость процесса

Процесс развертывания теперь занимает меньше чем 10 минут против недели, и за счет того, что процесс автоматизирован с каждой итерацией развертывания шанс ошибок уменьшается.

### Всеобщее счастье

Инфраструктура как код позволяет быть счастливыми всем участникам  развертывания как учавствующим так и наблюдающих за результатами начальства т.к из-за применяемых подходов к работе уменьшая колво стресса в день релиза за счет автоматизации.

## Синтаксис terraform

Утилита [terraform](https://www.terraform.io/) использует для кода декларативный язык программирования, это значит что в отличие от процедурных языков программирования который выполняют инструкции на серверах, декларативные языки описывают конечное состояние сущностей к которых их необходимо привести.

Основной синтаксис будет таков:

```
resource "aws_instance" "example" {
  ami           = "ami-5e63d13e"
  instance_type = "t2.micro"
}
```
где:
- переменной _resource_ обозначается какой либо ресурс (Ваш К.О)
- _"awsinstance"_ 	- провайдер ресурса
- _"example"_ 		- имя ресурса
- такие значения как _ami_ или _instancetype_ являются конфигурацией ресурса


## Установка terraform hashicorp







### Материал основывается на [книге Terraform: Up & Running](http://www.terraformupandrunning.com/?ref=ybrikman-home) и [статье](https://www.oreilly.com/learning/why-use-terraform)  автора [Yevgeniy Brikman](https://github.com/brikis98/) и является вольным переводом оных на русский язык.
